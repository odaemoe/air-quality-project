\# Architectural Decision Records

\#\# ADR-001: Генерация данных по загрязнителям вместо использования OpenAQ API

\#\#\# Статус  
Принято 31.01.2026

\#\#\# Контекст  
Для проекта требовались данные по загрязнителям воздуха (PM2.5, PM10, NO₂, O₃) из открытых источников для трёх городов: Москва, Париж, Берлин за период 15–28 января 2025 г. Основной кандидат — публичный API OpenAQ.

\#\#\# Проблема  
\- OpenAQ требует аутентификацию (регистрация и API key) для production-запросов  
\- Данные по выбранным городам неполные или отсутствуют за нужный период (особенно для Москвы)  
\- Прямые запросы без ключа возвращают ошибку 403 или пустой ответ  
\- Ограничения rate limiting мешают массовой загрузке данных

\#\#\# Решение  
Сгенерировать синтетические данные на основе реалистичных городских паттернов:  
\- Базовый уровень PM2.5 зависит от города (Москва \> Берлин \> Париж)  
\- Ночные пики (увеличение на 30–40% в 00:00–06:00 из\-за отопления и трафика)  
\- Обратная корреляция с температурой (чем холоднее — тем выше загрязнение)  
\- Данные по погоде взяты из реального источника (Open-Meteo API)

\#\#\# Альтернативы  
| Вариант | Почему отклонено |  
|---------|------------------|  
| Использовать другой город с полными данными в OpenAQ | Нарушает сравнительный анализ между Москвой/Парижем/Берлином |  
| Парсить сторонние сайты (например, сайт Росгидромета) | Нестабильно, юридические риски, сложность поддержки |  
| Ручной сбор данных из таблиц | Трудоёмко, не масштабируемо, ошибка человека |

\#\#\# Последствия  
✅ Данные соответствуют реальным паттернам для учебного проекта    
✅ Полный контроль над структурой, периодом и городами    
✅ Упрощённая воспроизводимость (скрипт генерации в одном файле)    
⚠️ Требует честного указания в документации, что данные сгенерированы  
